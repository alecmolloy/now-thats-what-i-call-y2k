function fillScene(){scene=new THREE.Scene;var e=new THREE.AmbientLight(3355443),t=new THREE.DirectionalLight(16777215,1);t.position.set(200,400,500);var a=new THREE.DirectionalLight(16777215,1);a.position.set(-500,250,-200),scene.add(e),scene.add(t),scene.add(a),depth=50;var r=new THREE.TextGeometry("NOW",{size:110,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),o=new THREE.TextGeometry("THAT'S WHAT I CALL",{size:22.5,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:3,bevelSize:1,curveSegments:100}),n=new THREE.TextGeometry("Y",{size:125,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),i=new THREE.TextGeometry("2",{size:125,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),s=new THREE.TextGeometry("K!",{size:125,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),l=new THREE.BoxGeometry(350,55,depth-2),d=new THREE.MeshPhongMaterial({color:16575265,side:THREE.DoubleSide}),g=new THREE.MeshPhongMaterial({color:13184495,side:THREE.DoubleSide}),v=new THREE.Mesh(r,d),h=new THREE.Mesh(o,d),c=new THREE.Mesh(l,g),m=new THREE.Mesh(n,d),E=new THREE.Mesh(i,d),w=new THREE.Mesh(s,d);v.translateY(40),v.translateX(-165),h.translateY(-12.5),h.translateX(-160),m.translateY(-165),m.translateX(-180),E.translateY(-165),E.translateX(-85),w.translateY(-165),w.translateX(25),c.translateZ(depth/2),logo=new THREE.Object3D,logo.add(v),logo.add(h),logo.add(c),logo.add(m),logo.add(E),logo.add(w),logo.rotateX(Math.PI),logo.rotateY(Math.PI);for(var u=0;25>u;u++)nowLogo=logo.clone(),nowLogo.position.x=2e3*Math.random()-1e3,nowLogo.position.y=2e3*Math.random()-1e3,nowLogo.position.z=2e3*Math.random()-1e3,nowLogo.rotation.x=4*Math.random(),nowLogo.rotation.y=4*Math.random(),nowLogo.rotation.z=4*Math.random(),logos.push(nowLogo),scene.add(nowLogo)}function init(){var e=window.innerWidth,t=window.innerHeight,a=e/t;renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.gammaInput=!0,renderer.gammaOutput=!0,renderer.setSize(e,t),renderer.setClearColor(0,0);var r=document.getElementById("container");r.appendChild(renderer.domElement),camera=new THREE.PerspectiveCamera(1e3,a,1,1e4),cameraControls=new THREE.OrbitControls(camera,renderer.domElement),camera.position.set(0,10,300),cameraControls.target.set(0,0,0)}function addToDOM(){var e=document.getElementById("container"),t=e.getElementsByTagName("canvas");t.length>0&&e.removeChild(t[0]),e.appendChild(renderer.domElement)}function animate(){window.requestAnimationFrame(animate),analyser.getByteTimeDomainData(dataArray);var e=Math.average(dataArray);e=200*(e-128)+128,saturationTarget.style.webkitFilter="saturate("+e+"%)",saturationTarget.style.transform="rotateY("+Math.abs(e/100)+"deg)",saturationTarget.style.transform="rotateX("+Math.abs(0-e/100)+"deg)",console.log(e),camera.rotation.y=camera.rotation.y+.001,camera.rotation.x=camera.rotation.x+.001;for(var t=0;t<logos.length;t++)logos[t].rotation.y=Math.sin(5e-4*Date.now())/4,logos[t].rotation.x=Math.sin(.001*Date.now())/8,logos[t].position.x=logos[t].position.x+1*Math.sin(Date.now()/1e4);render()}function gotStream(e){source=audioCtx.createMediaStreamSource(e),source.connect(analyser),draw()}function lostStream(e){console.log(e)}function render(){renderer.render(scene,camera)}Math.average=function(e){for(var t=e.length,a=0,r=0;t>r;)a+=e[r++];return a/t};var camera,scene,renderer,cameraControls,effectController,logo,logos=[],clock=new THREE.Clock,saturationTarget=document.getElementById("saturationTarget"),audioCtx=new(window.AudioContext||window.webkitAudioContext),audioCtx=new AudioContext,source,analyser=audioCtx.createAnalyser();analyser.fftSize=32;var bufferLength=analyser.fftSize,dataArray=new Uint8Array(bufferLength);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.webkitGetUserMedia({audio:!0},gotStream,lostStream),init(),fillScene(),addToDOM(),animate();
