function fillScene(){scene=new THREE.Scene;var e=new THREE.AmbientLight(3355443),t=new THREE.DirectionalLight(16777215,1);t.position.set(200,400,500);var a=new THREE.DirectionalLight(16777215,1);a.position.set(-500,250,-200),scene.add(e),scene.add(t),scene.add(a),depth=50;var r=new THREE.TextGeometry("NOW",{size:110,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),o=new THREE.TextGeometry("THAT'S WHAT I CALL",{size:22.5,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:3,bevelSize:1,curveSegments:100}),n=new THREE.TextGeometry("Y",{size:125,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),i=new THREE.TextGeometry("2",{size:125,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),w=new THREE.TextGeometry("K!",{size:125,height:depth,weight:"bold",bevelEnabled:!0,bevelThickness:10,bevelSize:4,curveSegments:100}),h=new THREE.BoxGeometry(350,55,depth-2),s=new THREE.MeshPhongMaterial({color:16575265,side:THREE.DoubleSide}),c=new THREE.MeshPhongMaterial({color:13184495,side:THREE.DoubleSide}),l=new THREE.Mesh(r,s),d=new THREE.Mesh(o,s),g=new THREE.Mesh(h,c),m=new THREE.Mesh(n,s),v=new THREE.Mesh(i,s),b=new THREE.Mesh(w,s);l.translateY(40),l.translateX(-165),d.translateY(-12.5),d.translateX(-160),m.translateY(-165),m.translateX(-180),v.translateY(-165),v.translateX(-85),b.translateY(-165),b.translateX(25),g.translateZ(depth/2),logo=new THREE.Object3D,logo.add(l),logo.add(d),logo.add(g),logo.add(m),logo.add(v),logo.add(b),logo.rotateX(Math.PI),logo.rotateY(Math.PI);for(var p=0;25>p;p++)nowLogo=logo.clone(),nowLogo.position.x=2e3*Math.random()-1e3,nowLogo.position.y=2e3*Math.random()-1e3,nowLogo.position.z=2e3*Math.random()-1e3,nowLogo.rotation.x=4*Math.random(),nowLogo.rotation.y=4*Math.random(),nowLogo.rotation.z=4*Math.random(),logos.push(nowLogo),scene.add(nowLogo)}function init(){var e=window.innerWidth,t=window.innerHeight,a=e/t;renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.gammaInput=!0,renderer.gammaOutput=!0,renderer.setSize(e,t),renderer.setClearColor(0,0);var r=document.getElementById("container");r.appendChild(renderer.domElement),camera=new THREE.PerspectiveCamera(1e3,a,1,1e4),cameraControls=new THREE.OrbitControls(camera,renderer.domElement),camera.position.set(0,10,300),cameraControls.target.set(0,0,0)}function addToDOM(){var e=document.getElementById("container"),t=e.getElementsByTagName("canvas");t.length>0&&e.removeChild(t[0]),e.appendChild(renderer.domElement)}function animate(){window.requestAnimationFrame(animate),analyser.getByteTimeDomainData(dataArray);var e=Math.average(dataArray);e=200*(e-128)+128;var t=360*Math.sin(5e-7*Date.now());saturationTarget.style.webkitFilter="saturate("+e+"%) hue-rotate("+t+"deg)",camera.rotation.y=camera.rotation.y+.001,camera.rotation.x=camera.rotation.x+.001;for(var a=0;a<logos.length;a++)logos[a].rotation.y=Math.sin(5e-4*Date.now())/4,logos[a].rotation.x=Math.sin(.001*Date.now())/8,logos[a].position.x=logos[a].position.x+1*Math.sin(Date.now()/1e4);render(),Date.now()-midnight>3e5+(lastVisit-midnight)&&(lastVisit=Date.now(),websiteIndex=Math.floor(Math.random()*websitesLen),portal.src=websites[websiteIndex])}function gotStream(e){source=audioCtx.createMediaStreamSource(e),source.connect(filter),filter.connect(analyser)}function lostStream(e){console.log(e)}function render(){renderer.render(scene,camera)}Math.average=function(e){for(var t=e.length,a=0,r=0;t>r;)a+=e[r++];return a/t};var midnight=14293149e5,lastVisit=0,portal=document.getElementById("saturationTarget"),websiteIndex=0,websites=["http://web.archive.org/web/20010509091431/http://www.yahooligans.com/","http://web.archive.org/web/20010701002920/http://www.apple.com/","http://web.archive.org/web/20050615130515/http://www.yahoo.com/","http://web.archive.org/web/20040602193643/http://www.msn.com/","http://web.archive.org/web/20051126120416/http://www.youtube.com/","http://web.archive.org/web/20051126162049/http://youtube.com/?","http://web.archive.org/web/20040908164946/http://www2.wikipedia.com/main.shtml","http://web.archive.org/web/20060110212505/http://www.wikipedia.org/","http://web.archive.org/web/20010331173908/http://www.wikipedia.com/","http://web.archive.org/web/20000229044717/http://www.msn.com/?","http://web.archive.org/web/20040720123928/http://www.msn.com","http://web.archive.org/web/20011217182637/http://www.wikipedia.com/","http://web.archive.org/web/20040704033510/http://www.myspace.com/index.cfm?fuseaction=splash","http://web.archive.org/web/20060102021922/http://www.google.com/","http://web.archive.org/web/20050323094154/http://www.myspace.com/","http://web.archive.org/web/20070214130504/http://www.google.com/","http://web.archive.org/web/20010301084232/http://www.nyt.com/","http://web.archive.org/web/20010118225900/http://www.nyt.com/","http://web.archive.org/web/20010516180658/http://www.nyt.com/","http://web.archive.org/web/20011114200348/http://nyt.com/","http://web.archive.org/web/20010912105526/http://www.nyt.com/","http://web.archive.org/web/20000621042010/http://www.msn.com/","http://web.archive.org/web/20080318044032/http://nyt.com/","http://web.archive.org/web/20000510111337/http://www.msn.com/?","http://web.archive.org/web/20090805022735/http://www.nytimes.com/","http://web.archive.org/web/20020605031604/http://myspace.com/","http://web.archive.org/web/20010208191254/http://www.myspace.com/nd_home.asp"],websitesLen=websites.length,camera,scene,renderer,cameraControls,effectController,logo,logos=[],clock=new THREE.Clock,saturationTarget=document.getElementById("saturationTarget"),audioCtx=new(window.AudioContext||window.webkitAudioContext),audioCtx=new AudioContext,source,filter=audioCtx.createBiquadFilter();filter.type="string"==typeof filter.type?"lowpass":0,filter.frequency.value=100;var analyser=audioCtx.createAnalyser();analyser.fftSize=128;var bufferLength=analyser.fftSize,dataArray=new Uint8Array(bufferLength);navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.webkitGetUserMedia({audio:!0},gotStream,lostStream),init(),fillScene(),addToDOM(),animate();
